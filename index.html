<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Doberská florbalová liga</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
    header { background: #333; color: white; text-align: center; padding: 15px; }
    nav { display: flex; justify-content: center; background: #444; }
    nav button {
      flex: 1; padding: 12px; border: none; background: #555; color: white; cursor: pointer; font-size: 16px;
    }
    nav button.active { background: #e91e63; }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    table {
      width: 100%; border-collapse: collapse; margin-top: 15px; background: white;
    }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #e91e63; color: white; }
    h2 { margin-top: 0; }
    .subtabs { display: flex; gap: 5px; margin-bottom: 10px; }
    .subtabs button {
      padding: 8px; border: none; background: #999; color: white; cursor: pointer;
    }
    .subtabs button.active { background: #e91e63; }
    .roster-section { display: none; }
    .roster-section.active { display: block; }
  </style>
</head>
<body>
  <header>
    <h1>Doberská florbalová liga</h1>
  </header>

  <nav>
    <button class="tab-button active" data-tab="tabulka">Tabulka</button>
    <button class="tab-button" data-tab="vysledky">Výsledky</button>
    <button class="tab-button" data-tab="rozpis">Rozpis</button>
    <button class="tab-button" data-tab="soupisky">Soupisky</button>
    <button class="tab-button" data-tab="strelci">Střelci</button>
    <button class="tab-button" data-tab="brankari">Brankáři</button>
  </nav>

  <section id="tabulka" class="active">
    <h2>Tabulka</h2>
    <table id="standingsTable">
      <thead>
        <tr>
          <th>Pořadí</th>
          <th>Tým</th>
          <th>Z</th>
          <th>V</th>
          <th>Vn</th>
          <th>R</th>
          <th>Pn</th>
          <th>P</th>
          <th>Body</th>
          <th>Skóre</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="vysledky">
    <h2>Výsledky</h2>
    <table id="resultsTable">
      <thead>
        <tr><th>Datum</th><th>Domácí</th><th>Výsledek</th><th>Hosté</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="rozpis">
    <h2>Rozpis</h2>
    <table id="scheduleTable">
      <thead>
        <tr><th>Datum</th><th>Domácí</th><th>Hosté</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="soupisky">
    <h2>Soupisky</h2>
    <div class="subtabs" id="teamTabs"></div>
    <div id="rostersContainer"></div>
  </section>

  <section id="strelci">
    <h2>Střelci</h2>
    <table id="scorersTable">
      <thead>
        <tr><th>Jméno</th><th>Tým</th><th>Góly</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="brankari">
    <h2>Brankáři</h2>
    <table id="goaliesTable">
      <thead>
        <tr><th>Jméno</th><th>Tým</th><th>Zápasy</th><th>Obdržené góly</th><th>Průměr</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    const data = {
      teams: [
        {
          name: "Homolkovi vepři",
          players: [
            { number: 13, name: "Jan Homolka", position: "Útočník", games: 2, goals: 5 },
            { number: 8, name: "Petr Homolka", position: "Útočník", games: 2, goals: 3 }
          ],
          goalie: { name: "Tomáš Homolka", games: 2, goalsAgainst: 7 }
        },
        {
          name: "Skalka",
          players: [
            { number: 13, name: "Dominik Umlauf", position: "Útočník", games: 1, goals: 2 },
            { number: 10, name: "Filip Umlauf", position: "Útočník", games: 1, goals: 1 }
          ],
          goalie: { name: "Josef Pohl", games: 1, goalsAgainst: 5 }
        },
        {
          name: "Hroši",
          players: [
            { number: 7, name: "Daniel Šmída", position: "Útočník", games: 1, goals: 1 },
            { number: 11, name: "Adam Šmída", position: "Útočník", games: 1, goals: 2 },
            { number: 10, name: "Martin Spanilý", position: "Obránce", games: 1, goals: 0 },
            { number: 2, name: "Jiří Rozinek", position: "Obránce", games: 1, goals: 0 }
          ],
          goalie: { name: "Petr Hroch", games: 0, goalsAgainst: 0 }
        }
      ],
      matches: [
        { date: "2025-09-18", home: "Homolkovi vepři", away: "Skalka", homeGoals: 5, awayGoals: 3 },
        { date: "2025-09-20", home: "Hroši", away: "Skalka", homeGoals: 0, awayGoals: 0 }
      ]
    };

    function showTab(tabId) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.querySelector(`#${tabId}`).classList.add("active");
      document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
      document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");
    }
    document.querySelectorAll(".tab-button").forEach(btn =>
      btn.addEventListener("click", () => showTab(btn.dataset.tab))
    );

    function renderStandings() {
      const standings = data.teams.map(team => {
        const played = data.matches.filter(m =>
          (m.home === team.name || m.away === team.name) &&
          (m.homeGoals !== 0 || m.awayGoals !== 0)
        );
        let wins = 0, winsOT = 0, ties = 0, lossOT = 0, losses = 0, points = 0, gf = 0, ga = 0;
        played.forEach(m => {
          const isHome = m.home === team.name;
          const gf_ = isHome ? m.homeGoals : m.awayGoals;
          const ga_ = isHome ? m.awayGoals : m.homeGoals;
          gf += gf_; ga += ga_;
          if (gf_ > ga_) { wins++; points += 3; }
          else if (gf_ < ga_) { losses++; }
          else { ties++; points += 1; }
        });
        return { team: team.name, Z: played.length, V: wins, Vn: winsOT, R: ties, Pn: lossOT, P: losses, Body: points, Skore: `${gf}:${ga}` };
      });
      standings.sort((a,b)=>b.Body-a.Body);
      const tbody = document.querySelector("#standingsTable tbody");
      tbody.innerHTML = standings.map((s,i)=>
        `<tr><td>${i+1}</td><td>${s.team}</td><td>${s.Z}</td><td>${s.V}</td><td>${s.Vn}</td><td>${s.R}</td><td>${s.Pn}</td><td>${s.P}</td><td>${s.Body}</td><td>${s.Skore}</td></tr>`
      ).join("");
    }

    function renderResults() {
      const results = data.matches.filter(m=>m.homeGoals!==0 || m.awayGoals!==0)
        .sort((a,b)=>new Date(b.date)-new Date(a.date));
      const tbody = document.querySelector("#resultsTable tbody");
      tbody.innerHTML = results.map(m=>
        `<tr><td>${m.date}</td><td>${m.home}</td><td>${m.homeGoals}:${m.awayGoals}</td><td>${m.away}</td></tr>`
      ).join("");
    }

    function renderSchedule() {
      const schedule = data.matches.filter(m=>m.homeGoals===0 && m.awayGoals===0)
        .sort((a,b)=>new Date(a.date)-new Date(b.date));
      const tbody = document.querySelector("#scheduleTable tbody");
      tbody.innerHTML = schedule.map(m=>
        `<tr><td>${m.date}</td><td>${m.home}</td><td>${m.away}</td></tr>`
      ).join("");
    }

    function renderRosters() {
      const tabs = document.querySelector("#teamTabs");
      const container = document.querySelector("#rostersContainer");
      tabs.innerHTML = "";
      container.innerHTML = "";
      data.teams.forEach((t,idx)=>{
        const btn = document.createElement("button");
        btn.textContent = t.name;
        if(idx===0) btn.classList.add("active");
        btn.addEventListener("click",()=>{
          document.querySelectorAll("#teamTabs button").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
          document.querySelectorAll(".roster-section").forEach(r=>r.classList.remove("active"));
          document.querySelector(`#roster-${t.name}`).classList.add("active");
        });
        tabs.appendChild(btn);

        const div = document.createElement("div");
        div.id = `roster-${t.name}`;
        div.classList.add("roster-section");
        if(idx===0) div.classList.add("active");

        let rows = t.players.map(p=>
          `<tr><td>${p.number}</td><td>${p.name}</td><td>${p.position}</td><td>${p.games}</td><td>${p.goals}</td></tr>`
        ).join("");
        rows += `<tr><td>-</td><td>${t.goalie.name}</td><td>Brankář</td><td>${t.goalie.games}</td><td>${t.goalie.goalsAgainst} GA</td></tr>`;

        div.innerHTML = `<table>
          <thead><tr><th>#</th><th>Příjmení a jméno</th><th>Pozice</th><th>Z</th><th>G</th></tr></thead>
          <tbody>${rows}</tbody>
        </table>`;
        container.appendChild(div);
      });
    }

    function renderScorers() {
      let allPlayers = [];
      data.teams.forEach(t=>{
        t.players.forEach(p=>allPlayers.push({name:p.name,team:t.name,goals:p.goals}));
      });
      allPlayers.sort((a,b)=>b.goals-a.goals);
      const tbody = document.querySelector("#scorersTable tbody");
      tbody.innerHTML = allPlayers.map(p=>
        `<tr><td>${p.name}</td><td>${p.team}</td><td>${p.goals}</td></tr>`
      ).join("");
    }

    function renderGoalies() {
      const tbody = document.querySelector("#goaliesTable tbody");
      tbody.innerHTML = data.teams.map(t=>{
        const prumer = t.goalie.games>0 ? (t.goalie.goalsAgainst / t.goalie.games).toFixed(2) : "-";
        return `<tr><td>${t.goalie.name}</td><td>${t.name}</td><td>${t.goalie.games}</td><td>${t.goalie.goalsAgainst}</td><td>${prumer}</td></tr>`;
      }).join("");
    }

    renderStandings();
    renderResults();
    renderSchedule();
    renderRosters();
    renderScorers();
    renderGoalies();
  </script>
</body>
</html>
